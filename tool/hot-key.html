<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>hot-key 热键方案 | HIS-前端开发手册</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/his-doc/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/his-doc/assets/css/0.styles.a540ceaa.css" as="style"><link rel="preload" href="/his-doc/assets/js/app.e5dc3d43.js" as="script"><link rel="preload" href="/his-doc/assets/js/3.e8f4d279.js" as="script"><link rel="preload" href="/his-doc/assets/js/22.e51e5084.js" as="script"><link rel="prefetch" href="/his-doc/assets/js/10.3b8b887c.js"><link rel="prefetch" href="/his-doc/assets/js/11.4bc066a3.js"><link rel="prefetch" href="/his-doc/assets/js/12.58932a78.js"><link rel="prefetch" href="/his-doc/assets/js/13.e30bd563.js"><link rel="prefetch" href="/his-doc/assets/js/14.627f1459.js"><link rel="prefetch" href="/his-doc/assets/js/15.8b7baec9.js"><link rel="prefetch" href="/his-doc/assets/js/16.f24b8d44.js"><link rel="prefetch" href="/his-doc/assets/js/17.485c4387.js"><link rel="prefetch" href="/his-doc/assets/js/18.5527f30f.js"><link rel="prefetch" href="/his-doc/assets/js/19.9be9406d.js"><link rel="prefetch" href="/his-doc/assets/js/2.2acb23bb.js"><link rel="prefetch" href="/his-doc/assets/js/20.58048502.js"><link rel="prefetch" href="/his-doc/assets/js/21.0f603a59.js"><link rel="prefetch" href="/his-doc/assets/js/23.0cb82939.js"><link rel="prefetch" href="/his-doc/assets/js/24.1f27d95d.js"><link rel="prefetch" href="/his-doc/assets/js/25.8294e5bf.js"><link rel="prefetch" href="/his-doc/assets/js/26.1bc271e7.js"><link rel="prefetch" href="/his-doc/assets/js/27.bfc1ec59.js"><link rel="prefetch" href="/his-doc/assets/js/4.48156fff.js"><link rel="prefetch" href="/his-doc/assets/js/5.fa7ee6f6.js"><link rel="prefetch" href="/his-doc/assets/js/6.fed86ba4.js"><link rel="prefetch" href="/his-doc/assets/js/7.c2568880.js"><link rel="prefetch" href="/his-doc/assets/js/8.f859b08e.js"><link rel="prefetch" href="/his-doc/assets/js/9.3c663132.js">
    <link rel="stylesheet" href="/his-doc/assets/css/0.styles.a540ceaa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><section><div><header class="doc-header"><h2 class="doc-header-logo"><a href="/his-doc/" class="router-link-active"><img src="/his-doc/assets/img/his.647a9dbf.svg" alt=""> <span>前端开发手册</span></a></h2> <ul class="doc-header-nav"><li class="doc-header-nav-item"><a href="/his-doc/guide/" class="doc-header-nav-item-link">
            指南
          </a></li><li class="doc-header-nav-item"><a href="/his-doc/tool/" class="doc-header-nav-item-link router-link-active">
            工具
          </a></li><li class="doc-header-nav-item"><a href="/his-doc/standard/" class="doc-header-nav-item-link">
            规范
          </a></li></ul></header></div> <main class="doc-main typo doc-main-md"><aside class="doc-aside"><ul class="doc-aside-nav"><li><a href="/his-doc/tool/" class="router-link-active">工具概览</a></li><li><a href="/his-doc/tool/his-cli.html">his-cli 脚手架</a></li><li><a href="/his-doc/tool/his-request.html">his-request 请求</a></li><li><a href="/his-doc/tool/hot-key.html" aria-current="page" class="router-link-exact-active router-link-active">hot-key 热键方案</a></li><li><a href="/his-doc/tool/micro-app.html">@winning/micro-app</a></li><li><a href="/his-doc/tool/vue-cli-plugin-his.html">vue-cli 插件</a></li><li><a href="/his-doc/tool/winning-cookie-webpack-plugin.html">webpack 自动登陆插件</a></li><li><a href="/his-doc/tool/winning-dll.html">winning-dll 组件</a></li><li><a href="/his-doc/tool/winning-micro-app-service.html">wms 使用文档</a></li></ul></aside> <div class="content__default"><h2 id="hot-key-热键方案"><a href="#hot-key-热键方案" class="header-anchor">#</a> hot-key 热键方案</h2> <h3 id="说明"><a href="#说明" class="header-anchor">#</a> 说明</h3> <p>该方案是为了方便 his 开发者便捷的进行快捷键的添加而设计的一套方案。基于 vue 的自定义指令，便于在任何地方添加。</p> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 基础使用 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>
  <span class="token attr-name"><span class="token namespace">v-win-hotkey:</span><span class="token namespace">[{eventName:</span>`openInpatSettlement`}]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClick<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  {{ buttonTxt }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 允许在元素不在页面上时生效 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>
  <span class="token attr-name"><span class="token namespace">v-win-hotkey:</span><span class="token namespace">[{eventName:</span>`openInpatSettlement`}].always</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClick<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  {{ buttonTxt }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 遍历配置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>
  <span class="token attr-name"><span class="token namespace">v-win-hotkey:</span><span class="token namespace">[{eventName:</span><span class="token namespace">`openInpatSettlement`,tipPopper:</span><span class="token namespace">true,toolTipOptions:</span><span class="token namespace">{placement:</span><span class="token namespace">`bottom`,effect:</span>`dark`}}]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
        onClick
      <span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  {{ buttonTxt }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 注册插件</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>WinHotKey<span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'win_hot_key_query_params_change_event'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">detail</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">appSystemCode</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>appSystemCode<span class="token punctuation">,</span>
        <span class="token literal-property property">appMenuCode</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>appMenuCode
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>⚠️ 默认情况下，在指令所在的元素不存在与 dom 上时，快捷键的调用将不会生效，如需生效，请添加 always</p></blockquote> <blockquote><p>⚠️ 快捷键会通过查询元素上是否有 disabled 属性并且值为 disabled 判断不触发，不过仍建议自己在回调函数中处理 disabled 逻辑</p></blockquote> <h3 id="参数说明"><a href="#参数说明" class="header-anchor">#</a> 参数说明</h3> <h4 id="插件注册参数-vue-use"><a href="#插件注册参数-vue-use" class="header-anchor">#</a> 插件注册参数（Vue.use）</h4> <table><thead><tr><th>参数名</th> <th>类型</th> <th>说明</th> <th>默认值</th></tr></thead> <tbody><tr><td>forcedInstall</td> <td>boolean</td> <td>是否强制进行安装,可以覆盖以前的安装</td> <td>false</td></tr></tbody></table> <h4 id="中括号-内的参数"><a href="#中括号-内的参数" class="header-anchor">#</a> 中括号([])内的参数</h4> <table><thead><tr><th>参数名</th> <th>说明</th> <th>默认值</th></tr></thead> <tbody><tr><td>eventName</td> <td>用于表明当前快捷键的事件名称</td> <td>—</td></tr> <tr><td>args</td> <td>用于给快捷键触发的函数传递的参数</td> <td>—</td></tr> <tr><td>always</td> <td>默认情况下，在组件没有销毁时，但指令注册的元素不在 dom 上时，快捷键将不会触发。添加该参数，将会保持触发。</td> <td>false</td></tr> <tr><td>showTip</td> <td>是否显示快捷键提示</td> <td>button 默认为 true，其他为 fale</td></tr> <tr><td>tipPopper</td> <td>提示是否是弹出形式</td> <td>false</td></tr> <tr><td>toolTipOptions</td> <td>弹出的提示选项</td> <td>{placement:'right',effect:'dark'}</td></tr> <tr><td>disRegister</td> <td>不注册，供可能有些按钮组需要遍历使用</td> <td>false</td></tr></tbody></table> <h5 id="tooltipoptions"><a href="#tooltipoptions" class="header-anchor">#</a> toolTipOptions</h5> <table><thead><tr><th>参数名</th> <th>说明</th> <th>默认值</th> <th>可选值</th></tr></thead> <tbody><tr><td>placement</td> <td>浮窗的方向</td> <td>right</td> <td>top/top-start/top-end/bottom/bottom-start/bottom-end/left/left-start/left-end/right/right-start/right-end</td></tr> <tr><td>effect</td> <td>样式</td> <td>dark</td> <td>dark | light</td></tr></tbody></table> <h4 id="通过-添加的参数"><a href="#通过-添加的参数" class="header-anchor">#</a> 通过.添加的参数</h4> <table><thead><tr><th>参数名</th> <th>说明</th> <th>默认值</th></tr></thead> <tbody><tr><td>always</td> <td>默认情况下，在组件没有销毁时，但指令注册的元素不在 dom 上时，快捷键将不会触发。添加该参数，将会保持触发。</td> <td>—</td></tr></tbody></table> <h4 id="等号后面的参数"><a href="#等号后面的参数" class="header-anchor">#</a> 等号后面的参数</h4> <table><thead><tr><th>参数名</th> <th>说明</th> <th>默认值</th></tr></thead> <tbody><tr><td>—</td> <td>快捷键触发将会调用的 vue 组件的 method 函数</td> <td>—</td></tr></tbody></table> <h3 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h3> <p>当当前可用事件数据更改时，将发送 win_hot_key_cur_data_change_event 事件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">HOT_KEY_CUR_DATA_CHANGE_EVENT_NAME</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'his-components'</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token constant">HOT_KEY_CUR_DATA_CHANGE_EVENT_NAME</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
  store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'hotkey/setMicroAppHotKeyArr'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="tasking"><a href="#tasking" class="header-anchor">#</a> Tasking</h3> <ul><li>[x] 支持快捷键的指令注册</li> <li>[x] 支持快键键的修改</li> <li>[x] 支持快捷键的展示</li> <li>[x] 支持不同页面同一组件快捷键的统一修改</li> <li>[x] 支持元素不展示时的快捷键触发</li> <li>[x] 支持云端同步</li> <li>[x] 支持元素被遮挡时不触发</li></ul></div></main> <footer class="doc-footer"></footer></section><div class="global-ui"></div></div>
    <script src="/his-doc/assets/js/app.e5dc3d43.js" defer></script><script src="/his-doc/assets/js/3.e8f4d279.js" defer></script><script src="/his-doc/assets/js/22.e51e5084.js" defer></script>
  </body>
</html>
