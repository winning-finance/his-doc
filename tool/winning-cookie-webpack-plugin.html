<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HIS-前端开发手册</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/his-doc/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/his-doc/assets/css/0.styles.cdf22441.css" as="style"><link rel="preload" href="/his-doc/assets/js/app.0b991849.js" as="script"><link rel="preload" href="/his-doc/assets/js/2.10c1cb4c.js" as="script"><link rel="preload" href="/his-doc/assets/js/10.280fc16e.js" as="script"><link rel="prefetch" href="/his-doc/assets/js/11.3d229d7f.js"><link rel="prefetch" href="/his-doc/assets/js/12.91c2fdff.js"><link rel="prefetch" href="/his-doc/assets/js/13.69ee0054.js"><link rel="prefetch" href="/his-doc/assets/js/14.5acd31a0.js"><link rel="prefetch" href="/his-doc/assets/js/15.ad59b1cc.js"><link rel="prefetch" href="/his-doc/assets/js/16.dd400fbe.js"><link rel="prefetch" href="/his-doc/assets/js/17.d0134f62.js"><link rel="prefetch" href="/his-doc/assets/js/18.7575b3c6.js"><link rel="prefetch" href="/his-doc/assets/js/19.7c9060eb.js"><link rel="prefetch" href="/his-doc/assets/js/20.7a604ca2.js"><link rel="prefetch" href="/his-doc/assets/js/21.a37fc924.js"><link rel="prefetch" href="/his-doc/assets/js/22.5e6179a0.js"><link rel="prefetch" href="/his-doc/assets/js/23.9eef5f5d.js"><link rel="prefetch" href="/his-doc/assets/js/24.7cd9c591.js"><link rel="prefetch" href="/his-doc/assets/js/25.95442e96.js"><link rel="prefetch" href="/his-doc/assets/js/26.b78b7b37.js"><link rel="prefetch" href="/his-doc/assets/js/27.3b808357.js"><link rel="prefetch" href="/his-doc/assets/js/3.ad457c25.js"><link rel="prefetch" href="/his-doc/assets/js/4.d14089bb.js"><link rel="prefetch" href="/his-doc/assets/js/5.a2bfff00.js"><link rel="prefetch" href="/his-doc/assets/js/6.7266275c.js"><link rel="prefetch" href="/his-doc/assets/js/7.079b7eae.js"><link rel="prefetch" href="/his-doc/assets/js/8.35a39beb.js"><link rel="prefetch" href="/his-doc/assets/js/9.672f03f9.js">
    <link rel="stylesheet" href="/his-doc/assets/css/0.styles.cdf22441.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><section><div><header class="doc-header"><h2 class="doc-header-logo"><a href="/his-doc/" class="router-link-active"><img src="/his-doc/assets/img/his.647a9dbf.svg" alt=""> <span>前端开发手册</span></a></h2> <ul class="doc-header-nav"><li class="doc-header-nav-item"><a href="/his-doc/guide/" class="doc-header-nav-item-link">
          指南
        </a></li><li class="doc-header-nav-item"><a href="/his-doc/tool/" class="doc-header-nav-item-link router-link-active">
          工具
        </a></li><li class="doc-header-nav-item"><a href="/his-doc/standard/" class="doc-header-nav-item-link">
          规范
        </a></li></ul></header></div> <main class="doc-main typo doc-main-md"><aside class="doc-aside"><ul class="doc-aside-nav"><li><a href="/his-doc/tool/" class="router-link-active">工具概览</a></li><li><a href="/his-doc/tool/his-cli.html">his-cli 脚手架</a></li><li><a href="/his-doc/tool/his-request.html">his-request 请求</a></li><li><a href="/his-doc/tool/hot-key.html">hot-key 热键方案</a></li><li><a href="/his-doc/tool/micro-app.html">@winning/micro-app</a></li><li><a href="/his-doc/tool/vue-cli-plugin-his.html">vue-cli 插件</a></li><li><a href="/his-doc/tool/winning-cookie-webpack-plugin.html" aria-current="page" class="router-link-exact-active router-link-active">webpack 自动登陆插件</a></li><li><a href="/his-doc/tool/winning-dll.html">winning-dll 组件</a></li><li><a href="/his-doc/tool/winning-micro-app-service.html">wms 使用文档</a></li></ul></aside> <div class="content__default"><h2 id="webpack-自动登陆插件"><a href="#webpack-自动登陆插件" class="header-anchor">#</a> webpack 自动登陆插件</h2> <p>插件 winning-cookie-webpack-plugin 使用</p> <h2 id="功能描述"><a href="#功能描述" class="header-anchor">#</a> 功能描述</h2> <p>针对Win6.0项目中，各小组前端项目没有登录页面，导致每次开发必须去测试环境登录获取token和userInfo信息，手动写入cookie，不利于开发工作。
故写此插件。只需传入相关参数即可在webpack构建时发请求获取信息自动写入相关cookie。</p> <h2 id="使用方法"><a href="#使用方法" class="header-anchor">#</a> 使用方法</h2> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> winning-cookie-webpack-plugin --dev
</code></pre></div><p>vue.config.js中加入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> WinCookiePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'winning-cookie-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">,</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'WinCookiePlugin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>WinCookiePlugin<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loginURL</span><span class="token operator">:</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span> <span class="token comment">// 登录地址URL</span>
            <span class="token literal-property property">userInfoURL</span><span class="token operator">:</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span> <span class="token comment">// 获取用户信息URL</span>
            <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token comment">// 登录用户名</span>
            <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'xxxx'</span> <span class="token comment">// 登录密码</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">extraCookies</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>浏览器效果：</p> <img src="/his-doc/assets/img/截图.a0bbe1e8.png"> <h2 id="参数说明"><a href="#参数说明" class="header-anchor">#</a> 参数说明</h2> <table><thead><tr><th>Param Name</th> <th>Required</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>userInfoParams</td> <td>可选</td> <td>Object</td> <td></td></tr> <tr><td>userInfoParams.loginURL</td> <td>当传入userInfoParams时必须</td> <td>String</td> <td>登录地址URL</td></tr> <tr><td>userInfoParams.userInfoURL</td> <td>当传入userInfoParams时必须</td> <td>Stirng</td> <td>获取用户信息URL</td></tr> <tr><td>userInfoParams.username</td> <td>当传入userInfoParams时必须</td> <td>String</td> <td>登录用户名</td></tr> <tr><td>userInfoParams.password</td> <td>当传入userInfoParams时必须</td> <td>String</td> <td>登录密码</td></tr> <tr><td>extraCookies</td> <td>可选</td> <td>Object</td> <td>需要写入的额外cookies对象</td></tr></tbody></table> <h2 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h2> <p>目前的策略是当且仅当登录接口和用户信息接口返回成功才写入所有cookie。</p></div></main> <footer class="doc-footer"></footer></section><div class="global-ui"></div></div>
    <script src="/his-doc/assets/js/app.0b991849.js" defer></script><script src="/his-doc/assets/js/2.10c1cb4c.js" defer></script><script src="/his-doc/assets/js/10.280fc16e.js" defer></script>
  </body>
</html>
